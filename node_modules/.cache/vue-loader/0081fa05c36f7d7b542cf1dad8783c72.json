{"remainingRequest":"/Users/root1/Desktop/学习/vue-element-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/root1/Desktop/学习/vue-element-web/src/views/user/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/root1/Desktop/学习/vue-element-web/src/views/user/list.vue","mtime":1621348722000},{"path":"/Users/root1/Desktop/学习/vue-element-web/node_modules/cache-loader/dist/cjs.js","mtime":1621340188000},{"path":"/Users/root1/Desktop/学习/vue-element-web/node_modules/babel-loader/lib/index.js","mtime":1621340187000},{"path":"/Users/root1/Desktop/学习/vue-element-web/node_modules/cache-loader/dist/cjs.js","mtime":1621340188000},{"path":"/Users/root1/Desktop/学习/vue-element-web/node_modules/vue-loader/lib/index.js","mtime":1621340196000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICcuLi8uLi9jb21wb25lbnRzL1BhZ2luYXRpb24vaW5kZXgnCmltcG9ydCB3YXZlcyBmcm9tICcuLi8uLi9kaXJlY3RpdmUvd2F2ZXMvd2F2ZXMnCmltcG9ydCB7IHBhcnNlVGltZSB9IGZyb20gJy4uLy4uL3V0aWxzL2luZGV4JwoKaW1wb3J0IHsgbGlzdFVzZXIsIGRlbGV0ZVVzZXIgfSBmcm9tICcuLi8uLi9hcGkvdXNlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gfSwKICBkaXJlY3RpdmVzOiB7IHdhdmVzIH0sCiAgZmlsdGVyczogewogICAgdmFsdWVGaWx0ZXIodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlIHx8ICfml6AnCiAgICB9LAogICAgdGltZUZpbHRlcih0aW1lKSB7CiAgICAgIHJldHVybiB0aW1lID8gcGFyc2VUaW1lKHRpbWUsICd7eX0te219LXtkfSB7aH06e2l9JykgOiAn5pegJwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlS2V5OiAwLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgbGlzdDogW10sCiAgICAgIHRvdGFsOiAwLAoKICAgICAgbGlzdFF1ZXJ5OiB7fSwKICAgICAgc2hvd0NvdmVyOiBmYWxzZSwKICAgICAgY2F0ZWdvcnlMaXN0OiBbXQoKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnBhcnNlUXVlcnkoKQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CgogICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICAvLyDliKDpmaQKICAgICAgLy9hbGVydCgn5Yig6Zmk5pON5L2cJykKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6ZmkJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIC8vIOmAieehruWumuWQju+8jOaJjeS8muaJp+ihjAogICAgICAgIGRlbGV0ZVVzZXIocm93LnVzZXJuYW1lKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubXNnIHx8ICfliKDpmaTmiJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5oYW5kbGVGaWx0ZXIoKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlVXBkYXRlKHJvdykgewogICAgICAvL2FsZXJ0KCcxJykKICAgICAgLy9hbGVydChyb3cudXNlcm5hbWUpCiAgICAgIC8vY29uc29sZS5sb2cocm93KQogICAgICAvLyDot7PovazliLDnvJbovpHpobXpnaIKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvdXNlci9lZGl0LyR7cm93LnVzZXJuYW1lfWApCiAgICB9LAogICAgcGFyc2VRdWVyeSgpIHsKICAgICAgY29uc3QgbGlzdFF1ZXJ5ID0gewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHNvcnQ6ICcraWQnCiAgICAgIH0KICAgICAgdGhpcy5saXN0UXVlcnkgPSB7IC4uLmxpc3RRdWVyeSwgLi4udGhpcy5saXN0UXVlcnkgfQogICAgfSwKICAgIHNvcnRDaGFuZ2UoZGF0YSkgewogICAgICBjb25zb2xlLmxvZygnc29ydENoYW5nZScsIGRhdGEpCiAgICAgIC8vIGFsZXJ0KGRhdGEub3JkZXIgKQogICAgICBjb25zdCB7IHByb3AsIG9yZGVyIH0gPSBkYXRhCiAgICAgIHRoaXMuc29ydEJ5KHByb3AsIG9yZGVyKQogICAgfSwKICAgIHNvcnRCeShwcm9wLCBvcmRlcikgewogICAgICBpZiAob3JkZXIgPT09ICdhc2NlbmRpbmcnKSB7CiAgICAgICAgdGhpcy5saXN0UXVlcnkuc29ydCA9IGArJHtwcm9wfWAKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxpc3RRdWVyeS5zb3J0ID0gYC0ke3Byb3B9YAogICAgICB9CiAgICAgIHRoaXMuaGFuZGxlRmlsdGVyKCkKICAgIH0sCgogICAgd3JhcHBlcktleXdvcmQoaywgdikgewogICAgICBmdW5jdGlvbiBoaWdoTGlnaHQodmFsdWUpIHsKICAgICAgICByZXR1cm4gYDxzcGFuIHN0eWxlPSJjb2xvcjojMTg5MGZmIj4ke3ZhbHVlfTwvc3Bhbj5gCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmxpc3RRdWVyeVtrXSkgewogICAgICAgIHJldHVybiB2CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gcmV0dXJuIHYKICAgICAgICByZXR1cm4gdi5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5saXN0UXVlcnlba10sICdpZycpLCB2ID0+IGhpZ2hMaWdodCh2KSkKICAgICAgfQogICAgfSwKCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBsaXN0VXNlcih0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gYWxlcnQocmVzcG9uc2UpCiAgICAgICAgY29uc3QgeyBsaXN0LCBjb3VudCB9ID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHRoaXMubGlzdCA9IGxpc3QKICAgICAgICB0aGlzLnRvdGFsID0gY291bnQKICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVGaWx0ZXIoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGUnLCB0aGlzLmxpc3RRdWVyeSkKICAgICAgLy8gYWxlcnQodGhpcy5saXN0UXVlcnkpCiAgICAgIHRoaXMuZ2V0TGlzdCh0aGlzLmxpc3RRdWVyeSkKICAgIH0sCiAgICBoYW5kbGVDcmVhdGUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdXNlci9jcmVhdGUnKQogICAgfSwKICAgIGNoYW5nZVNob3dDb3Zlcih2YWx1ZSkgewogICAgICB0aGlzLnNob3dDb3ZlciA9IHZhbHVlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-input\n        v-model=\"listQuery.id\"\n        placeholder=\"id\"\n        style=\"width: 200px\"\n        class=\"filter-item\"\n        clearable\n        @keyup.enter.native=\"handleFilter\"\n        @clear=\"handleFilter\"\n        @blur=\"handleFilter\"\n      />\n      <el-input\n        v-model=\"listQuery.username\"\n        placeholder=\"用户名\"\n        style=\"width: 200px\"\n        class=\"filter-item\"\n        clearable\n        @keyup.enter.native=\"handleFilter\"\n        @clear=\"handleFilter\"\n        @blur=\"handleFilter\"\n      />\n\n      <el-button\n        v-waves\n        class=\"filter-item\"\n        type=\"primary\"\n        icon=\"el-icon-search\"\n        style=\"margin-left: 10px\"\n        @click=\"handleFilter\"\n      >查询\n      </el-button>\n\n      <el-button\n        class=\"filter-item\"\n        type=\"primary\"\n        icon=\"el-icon-edit\"\n        style=\"margin-left: 5px\"\n        @click=\"handleCreate\"\n      >\n        新增\n      </el-button>\n\n    </div>\n\n    <el-table\n      :key=\"tableKey\"\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      border\n      fit\n      highlight-current-row\n      style=\"width: 100%\"\n      @sort-change=\"sortChange\"\n    >\n\n      <el-table-column\n        label=\"ID\"\n        prop=\"id\"\n        sortable=\"custom\"\n        align=\"cneter\"\n        width=\"80\"\n      />\n      <el-table-column label=\"用户名\" prop=\"username\" width=\"150\" align=\"center\" />\n      <el-table-column label=\"密码\" prop=\"password\" width=\"150\" align=\"center\" />\n\n      <el-table-column label=\"角色\" prop=\"role\" width=\"150\" align=\"center\" />\n      <el-table-column label=\"nickname\" prop=\"nickname\" width=\"150\" align=\"center\" />\n      <el-table-column label=\"avatar\" prop=\"avatar\" width=\"150\" align=\"center\" />\n\n      <el-table-column\n        label=\"操作\"\n        width=\"120\"\n        align=\"center\"\n        fixed=\"right\"\n      >\n        <template slot-scope=\"{ row }\">\n          <el-button type=\"text\" icon=\"el-icon-edit\" @click=\"handleUpdate(row)\" />\n          <el-button type=\"text\" icon=\"el-icon-delete\" style=\"color:#f56c6c\" @click=\"handleDelete(row)\" />\n\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total > 0\"\n      :total=\"total\"\n      :page.sync=\"listQuery.page\"\n      :limit.sync=\"listQuery.pageSize\"\n      @pagination=\"getList\"\n    />\n  </div>\n</template>\n\n<script>\n\nimport Pagination from '../../components/Pagination/index'\nimport waves from '../../directive/waves/waves'\nimport { parseTime } from '../../utils/index'\n\nimport { listUser, deleteUser } from '../../api/user'\n\nexport default {\n  components: { Pagination },\n  directives: { waves },\n  filters: {\n    valueFilter(value) {\n      return value || '无'\n    },\n    timeFilter(time) {\n      return time ? parseTime(time, '{y}-{m}-{d} {h}:{i}') : '无'\n    }\n  },\n  data() {\n    return {\n      tableKey: 0,\n      listLoading: true,\n      list: [],\n      total: 0,\n\n      listQuery: {},\n      showCover: false,\n      categoryList: []\n\n    }\n  },\n  created() {\n    this.parseQuery()\n  },\n  mounted() {\n    this.getList()\n  },\n  methods: {\n\n    handleDelete(row) {\n      // 删除\n      //alert('删除操作')\n      this.$confirm('此操作将永久删除', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        // 选确定后，才会执行\n        deleteUser(row.username).then(response => {\n          this.$notify({\n            title: '成功',\n            message: response.msg || '删除成功',\n            type: 'success',\n            duration: 2000\n          })\n          this.handleFilter()\n        })\n      })\n    },\n    handleUpdate(row) {\n      //alert('1')\n      //alert(row.username)\n      //console.log(row)\n      // 跳转到编辑页面\n\n      this.$router.push(`/user/edit/${row.username}`)\n    },\n    parseQuery() {\n      const listQuery = {\n        page: 1,\n        pageSize: 10,\n        sort: '+id'\n      }\n      this.listQuery = { ...listQuery, ...this.listQuery }\n    },\n    sortChange(data) {\n      console.log('sortChange', data)\n      // alert(data.order )\n      const { prop, order } = data\n      this.sortBy(prop, order)\n    },\n    sortBy(prop, order) {\n      if (order === 'ascending') {\n        this.listQuery.sort = `+${prop}`\n      } else {\n        this.listQuery.sort = `-${prop}`\n      }\n      this.handleFilter()\n    },\n\n    wrapperKeyword(k, v) {\n      function highLight(value) {\n        return `<span style=\"color:#1890ff\">${value}</span>`\n      }\n      if (!this.listQuery[k]) {\n        return v\n      } else {\n        // return v\n        return v.replace(new RegExp(this.listQuery[k], 'ig'), v => highLight(v))\n      }\n    },\n\n    getList() {\n      this.listLoading = true\n      listUser(this.listQuery).then(response => {\n        // alert(response)\n        const { list, count } = response.data\n        this.list = list\n        this.total = count\n        this.listLoading = false\n      })\n    },\n    handleFilter() {\n      console.log('handle', this.listQuery)\n      // alert(this.listQuery)\n      this.getList(this.listQuery)\n    },\n    handleCreate() {\n      this.$router.push('/user/create')\n    },\n    changeShowCover(value) {\n      this.showCover = value\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n"]}]}